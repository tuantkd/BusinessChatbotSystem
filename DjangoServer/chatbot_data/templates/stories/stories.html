{% extends "base.html" %}
{% block content %}
<ol class="breadcrumb" breadcrumb="">
  <li class="breadcrumb-item active"><span>Stories</span></li>
</ol>
<div class="container-fluid">
  <div class="animated fadeIn">
    <div class="row">
      <div class="col-sm-12">
        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-{{ message.tags }}" role="alert">
              {{ message }}
            </div>
          {% endfor %}
        {% endif %}
        <div class="card">
          <div class="card-block">
            <div class="form-group row">
              <label for="select" class="col-sm-2 col-form-label">Bot</label>
              <div class="col-sm-10">
                <select id="bot_name"  class="form-control" onchange="location = this.value;">
                  <option value="">Please select one</option>
                  {% for bot in botList %}
                    <option value="{% url 'stories' bot.id %}" {% if selected_bot == bot.id %} selected {% endif %}>{{ bot.bot_name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  {% if selected_bot %}
  <div class="row">
    <div class="col-sm-12">
      <div class="card">
        <div class="card-header">
          <strong>Stories</strong>
          <span class="float-right">
            <a class="btn btn-ghost-primary" href="{% url 'add_story' selected_bot.id %}"><i class="fa fa-plus"></i></a>
          </span>
        </div>
        <div class="card-block">
          <div class="list-group">
            {% for story in storyList %}
            <div class="list-group-item">
                <span id="_{{ story.id }}"><strong>{{ story.story_name }}</strong><br />{{ story.timestamp }}</span>
                <span class="float-right">
                  <!-- Nút xem chi tiết hoặc chỉnh sửa -->
                  <a href="{% url 'story_detail' story.id %}" class="btn btn-outline-secondary mr-2">
                    <span class="fa fa-eye">
                  </a>
                  <!-- Nút xóa -->
                  <a href="{% url 'delete_story' story.id %}" class="btn btn-outline-danger" onclick="return confirm('Are you sure? This will delete the story.');">
                    <span class="fa fa-trash">
                  </a>
                </span>
            </div>              
            <!-- Collapse content goes here -->
            {% endfor %}
          </div>

          <div style="float:right">
            <!-- Django pagination controls -->
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
